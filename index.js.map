{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["// import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport './css/styles.css';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// import { defineConfig } from 'vite';\n// import css from 'css-loader';\n\n// export default defineConfig({\n//   plugins: [css()],\n// });\n\nconst gallery = document.querySelector(\".gallery\");\nconst listener = document.querySelector(\"form\");\nconst API_KEY = \"49334918-ea87b03a35c8c75cd9fd8a30d\";\nlet lightbox;\n\nconst showInvalidDateToast = () => {\n  iziToast.show({\n    title: \"Invalid Date\",\n    message: \"Please choose a date in the future\",\n    backgroundColor: \"#ff6666\",\n    position: \"topRight\",\n  });\n};\n\nfunction showLoader(isLoading = false) {\n  const loader = document.getElementById(\"loader\");\n  loader.style.display = isLoading ? \"block\" : \"none\";\n}\n\nfunction handleSearch(event) {\n  event.preventDefault(); // Спочатку зупиняємо стандартну поведінку форми\n  showLoader(true); // Тепер показуємо лоадер\n\n  const input = event.target.querySelector(\"input[name='query']\");\n  if (!input || input.value.trim() === \"\") {\n    console.log(\"Поле пошуку порожнє!\");\n    showLoader(false);\n    return;\n  }\n\n  const query = input.value.trim();\n  console.log(\"Шукаємо:\", query);\n\n  getPhotos(query)\n    .catch((error) => console.error(\"Помилка при отриманні фото:\", error)) // Логування помилок\n    .finally(() => {\n      showLoader(false);\n      input.value = \"\"; // Очищуємо поле після завершення запиту\n    });\n}\n\n\nlistener.addEventListener(\"submit\", handleSearch);\n\nconst options = {\n  key: API_KEY,\n  image_type: \"photo\",\n  orientation: \"horizontal\",\n  safesearch: \"true\",\n};\n\nfunction getPhotos(query) {\n  const BASE_URL = \"https://pixabay.com/api/\";\n  const url = `${BASE_URL}?${new URLSearchParams({ ...options, q: query })}`;\n\n  return fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (data.hits.length === 0) {\n        console.log('Нічого не знайдено.');\n        showInvalidDateToast();\n        gallery.innerHTML = \"\";\n        return;\n      }\n\n      data.hits.forEach(image => {\n        const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n\n        createPhotoCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads });\n        renderGallery(data.hits)\n      });\n    })\n    .catch(error => console.error(\"Помилка при отриманні даних:\", error));\n}\n\nexport { getPhotos };\n\nfunction createPhotoCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  const card = document.createElement('div');\n  card.classList.add('photo-card');\n\n  card.innerHTML = `\n    <a href=\"${largeImageURL}\" class=\"gallery-link\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n    </a>\n    <div class=\"info\">\n      <div class=\"info-item\">\n        <span><b>Likes</b></span>\n        <span>${likes}</span>\n      </div>\n      <div class=\"info-item\">\n        <span><b>Views</b></span>\n        <span>${views}</span>\n      </div>\n      <div class=\"info-item\">\n        <span><b>Comments</b></span>\n        <span>${comments}</span>\n      </div>\n      <div class=\"info-item\">\n        <span><b>Downloads</b></span>\n        <span>${downloads}</span>\n      </div>\n    </div>\n  `;\n\n  gallery.appendChild(card);\n}\n\nfunction renderGallery(images) {\n  gallery.innerHTML = \"\";\n\n  images.forEach(image => {\n    createPhotoCard(image);\n  });\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\n\n// import { refs } from \"./utils/consts.js\";\n// import { handleBookAdd } from \"./handlers/form.js\";\n\n// refs.form.addEventListener(\"submit\", handleBookAdd);"],"names":["gallery","listener","API_KEY","lightbox","showInvalidDateToast","iziToast","showLoader","isLoading","loader","handleSearch","event","input","query","getPhotos","error","options","url","response","data","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createPhotoCard","renderGallery","card","images","SimpleLightbox"],"mappings":"2FAeA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,SAAS,cAAc,MAAM,EACxCC,EAAU,qCAChB,IAAIC,EAEJ,MAAMC,EAAuB,IAAM,CACjCC,EAAS,KAAK,CACZ,MAAO,eACP,QAAS,qCACT,gBAAiB,UACjB,SAAU,UACd,CAAG,CACH,EAEA,SAASC,EAAWC,EAAY,GAAO,CACrC,MAAMC,EAAS,SAAS,eAAe,QAAQ,EAC/CA,EAAO,MAAM,QAAUD,EAAY,QAAU,MAC/C,CAEA,SAASE,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBJ,EAAW,EAAI,EAEf,MAAMK,EAAQD,EAAM,OAAO,cAAc,qBAAqB,EAC9D,GAAI,CAACC,GAASA,EAAM,MAAM,KAAI,IAAO,GAAI,CACvC,QAAQ,IAAI,sBAAsB,EAClCL,EAAW,EAAK,EAChB,MACJ,CAEE,MAAMM,EAAQD,EAAM,MAAM,KAAM,EAChC,QAAQ,IAAI,WAAYC,CAAK,EAE7BC,EAAUD,CAAK,EACZ,MAAOE,GAAU,QAAQ,MAAM,8BAA+BA,CAAK,CAAC,EACpE,QAAQ,IAAM,CACbR,EAAW,EAAK,EAChBK,EAAM,MAAQ,EACpB,CAAK,CACL,CAGAV,EAAS,iBAAiB,SAAUQ,CAAY,EAEhD,MAAMM,EAAU,CACd,IAAKb,EACL,WAAY,QACZ,YAAa,aACb,WAAY,MACd,EAEA,SAASW,EAAUD,EAAO,CAExB,MAAMI,EAAM,4BAAe,IAAI,gBAAgB,CAAE,GAAGD,EAAS,EAAGH,CAAK,CAAE,CAAC,GAExE,OAAO,MAAMI,CAAG,EACb,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,OAAOA,EAAS,KAAM,CACvB,CAAA,EACA,KAAKC,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1B,QAAQ,IAAI,qBAAqB,EACjCd,EAAsB,EACtBJ,EAAQ,UAAY,GACpB,MACR,CAEMkB,EAAK,KAAK,QAAQC,GAAS,CACzB,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAKP,EAEjFQ,EAAgB,CAAE,aAAAP,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,EACxFE,EAAcV,EAAK,IAAI,CAC/B,CAAO,CACF,CAAA,EACA,MAAMJ,GAAS,QAAQ,MAAM,+BAAgCA,CAAK,CAAC,CACxE,CAIA,SAASa,EAAgB,CAAE,aAAAP,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CACjG,MAAMG,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,YAAY,EAE/BA,EAAK,UAAY;AAAA,eACJR,CAAa;AAAA,kBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,gBAK5BC,CAAK;AAAA;AAAA;AAAA;AAAA,gBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,gBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,gBAIRC,CAAS;AAAA;AAAA;AAAA,IAKvB1B,EAAQ,YAAY6B,CAAI,CAC1B,CAEA,SAASD,EAAcE,EAAQ,CAC7B9B,EAAQ,UAAY,GAEpB8B,EAAO,QAAQX,GAAS,CACtBQ,EAAgBR,CAAK,CACzB,CAAG,EAEIhB,EAMHA,EAAS,QAAS,EALlBA,EAAW,IAAI4B,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACpB,CAAK,CAIL"}